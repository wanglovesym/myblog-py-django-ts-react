# ğŸ“ ä¸ªäººåšå®¢ï¼ˆä¸­æ–‡æ–‡æ¡£ï¼‰

ä¸€ä¸ªç”± **Django REST Framework**ï¼ˆåç«¯ï¼‰ä¸ **React + TypeScript + Tailwind CSS**ï¼ˆå‰ç«¯ï¼‰æ„å»ºå“åº”å¼ä¸ªäººç«™ã€‚æ•´ä½“è®¾è®¡éµå¾ªç®€çº¦é£æ ¼ã€‚æ”¯æŒ Markdownã€åˆ†ç±»/æ ‡ç­¾ç®¡ç†ã€é¡¹ç›®å±•ç¤ºã€å…¨æ–‡æœç´¢ã€‚

> âœ¨ åœ¨çº¿æ¼”ç¤ºï¼š[https://www.wangshixin.me](https://www.wangshixin.me)
> ğŸ“¦ æŠ€æœ¯æ ˆï¼šPython 3.12 Â· Django 5.2 Â· DRF Â· PostgreSQL Â· React 19 Â· Vite Â· TypeScript Â· Tailwind CSS

---

## ğŸ“¸ æ•ˆæœæˆªå›¾

<div align="center">

### é¦–é¡µ

![é¦–é¡µ](docs/images/home-dark.png)

### åšå®¢æ–‡ç« 

![åšå®¢](docs/images/blog-dark.png)

### é¡¹ç›®å±•ç¤º

![é¡¹ç›®](docs/images/projects-dark.png)

</div>

---

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### åšå®¢æ¨¡å—

-   âœ… **æ–‡ç« ç®¡ç†**ï¼šMarkdown ç¼–è¾‘å¸¦è¯­æ³•é«˜äº®ã€è‰ç¨¿/å‘å¸ƒçŠ¶æ€ã€ä¸­æ–‡å‹å¥½ slug è‡ªåŠ¨ç”Ÿæˆ
-   âœ… **åˆ†ç±» & æ ‡ç­¾**ï¼šæ–‡ç« å¯å½’å±ä¸€ä¸ªåˆ†ç±»ï¼Œæ‰“å¤šä¸ªæ ‡ç­¾
-   âœ… **å…¨æ–‡æœç´¢**ï¼šæŒ‰æ ‡é¢˜ã€æ‘˜è¦ã€æ­£æ–‡è¿›è¡Œæ¨¡ç³Šæœç´¢
-   âœ… **ä»£ç é«˜äº®**ï¼šä½¿ç”¨ highlight.js å®ç°æ¼‚äº®çš„ä»£ç å—å±•ç¤º

### é¡¹ç›®å±•ç¤ºæ¨¡å—

-   âœ… **é¡¹ç›®ä½œå“é›†**ï¼šå±•ç¤ºé¡¹ç›®ï¼ŒåŒ…å«å°é¢å›¾ã€æŠ€æœ¯æ ˆã€åœ¨çº¿æ¼”ç¤ºé“¾æ¥
-   âœ… **æŠ€æœ¯æ ˆå±•ç¤º**ï¼šç‹¬ç«‹çš„ TechStack æ¨¡å‹ï¼Œæ”¯æŒè‡ªå®šä¹‰å›¾æ ‡å’Œé¢œè‰²
-   âœ… **çŠ¶æ€æ ‡ç­¾**ï¼šå¼€å‘ä¸­ / å·²å®Œæˆ / å·²ä¸Šçº¿ / æš‚æ—¶ä¸‹çº¿ çŠ¶æ€æŒ‡ç¤º
-   âœ… **ç²¾é€‰é¡¹ç›®**ï¼šç²¾é€‰é¡¹ç›®å°†åœ¨é¦–é¡µä»¥è½®æ’­æ˜¾ç¤ºï¼Œæœ€å¤šæ˜¾ç¤º 6 æ¡

### é€šç”¨ç‰¹æ€§

-   âœ… **å“åº”å¼è®¾è®¡**ï¼šé€‚é…æ‰‹æœºã€å¹³æ¿ä¸æ¡Œé¢ç«¯
-   âœ… **æ·±è‰²æ¨¡å¼**ï¼šç®€çº¦é£æ ¼ï¼Œå¸¦æ¯›ç»ç’ƒæ•ˆæœ
-   âœ… **å®‰å…¨é˜²æŠ¤**ï¼šXSS è¿‡æ»¤ï¼ˆDOMPurifyï¼‰ã€CORS é…ç½®ã€æ•æ„Ÿå­—æ®µä¿æŠ¤
-   âœ… **å¼€å‘è€…å‹å¥½**ï¼šTypeScript ç±»å‹å®‰å…¨ã€Docker æ”¯æŒã€å‰åç«¯åˆ†ç¦»æ¶æ„

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```bash
myblog-py-django-ts-react/        # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ myblog-backend-django/        # Django åç«¯
â”‚   â”œâ”€â”€ blog/                     # åšå®¢åº”ç”¨ï¼ˆPostã€Categoryã€Tagï¼‰
â”‚   â”œâ”€â”€ project/                  # é¡¹ç›®åº”ç”¨ï¼ˆProjectã€TechStackï¼‰
â”‚   â”œâ”€â”€ config/                   # é¡¹ç›®é…ç½®ï¼ˆsettingsã€urlsã€wsgiï¼‰
â”‚   â”œâ”€â”€ manage.py
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ myblog-frontend-react/        # React + TypeScript å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶ï¼ˆHomeã€Postã€Projects ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ components/          # é€šç”¨ç»„ä»¶ï¼ˆHeaderã€CategoryList ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ config/              # API å’Œç¤¾äº¤é“¾æ¥é…ç½®
â”‚   â”‚   â””â”€â”€ types/               # TypeScript æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ deploy/                       # éƒ¨ç½²è„šæœ¬ï¼ˆnginxã€certbot ç­‰ï¼‰
â”œâ”€â”€ docs/                         # æ–‡æ¡£å’Œå›¾ç‰‡
â”œâ”€â”€ docker-compose.dev.yml        # å¼€å‘ç¯å¢ƒ Docker Compose
â”œâ”€â”€ docker-compose.prod.yml       # ç”Ÿäº§ç¯å¢ƒ Docker Compose
â””â”€â”€ README.md                     # è‹±æ–‡ç‰ˆè¯´æ˜
```

---

## ğŸš€ æœ¬åœ°å¼€å‘å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

-   Docker & Docker Compose
-   Git
-   Makeï¼ˆå¯é€‰ï¼Œç”¨äºå¿«æ·å‘½ä»¤ï¼‰

### 1ï¼‰å…‹éš†ä»“åº“

```bash
git clone git@github.com:wanglovesym/myblog-py-django-ts-react.git
cd myblog-py-django-ts-react
```

### 2ï¼‰é…ç½®ç¯å¢ƒå˜é‡

```bash
# ä»æ¨¡æ¿åˆ›å»ºç¯å¢ƒæ–‡ä»¶
cp .env.dev.django.example .env.dev.django

# æ ¹æ®éœ€è¦ä¿®æ”¹ï¼ˆé»˜è®¤é…ç½®å³å¯ç”¨äºæœ¬åœ°å¼€å‘ï¼‰
```

### 3ï¼‰å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# ä½¿ç”¨ Makeï¼ˆæ¨èï¼‰
make init          # é¦–æ¬¡è¿è¡Œï¼šå¯åŠ¨å®¹å™¨ + æ‰§è¡Œè¿ç§»

# æˆ–æ‰‹åŠ¨ä½¿ç”¨ Docker Compose
docker compose -f docker-compose.dev.yml up -d
docker compose -f docker-compose.dev.yml exec backend python manage.py migrate
```

### 4ï¼‰åˆ›å»ºç®¡ç†å‘˜å¹¶å¼€å§‹åˆ›ä½œå†…å®¹

```bash
make superuser     # æ ¹æ®æç¤ºåˆ›å»ºç®¡ç†å‘˜è´¦å·
```

ç„¶åè®¿é—®ï¼š

-   ğŸŒ **å‰ç«¯**: http://localhost:5173
-   ğŸ’» **åç«¯ API**: http://localhost:8000/api/
-   ğŸ” **ç®¡ç†åå°**: http://localhost:8000/admin/

### å¸¸ç”¨å¼€å‘å‘½ä»¤

```bash
make dev-up-d           # åå°å¯åŠ¨
make dev-down           # åœæ­¢æ‰€æœ‰å®¹å™¨
make dev-logs           # æŸ¥çœ‹æ—¥å¿—
make dev-rebuild        # ä¿®æ”¹ä¾èµ–åé‡æ–°æ„å»º
make shell              # è¿›å…¥åç«¯å®¹å™¨ shell
make migrate            # æ‰§è¡Œæ•°æ®åº“è¿ç§»
make help               # æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤
```

---

## ğŸ³ Docker æ”¯æŒï¼ˆç”Ÿäº§å¯ç”¨ï¼‰

é¡¹ç›®æä¾›ç”Ÿäº§å¯ç”¨çš„ **Docker Compose** ç¼–æ’ï¼š

-   âœ… **å¤šæœåŠ¡ç¼–æ’**ï¼šNginxï¼ˆåå‘ä»£ç†ï¼‰+ Djangoï¼ˆGunicornï¼‰+ Reactï¼ˆé™æ€ï¼‰+ PostgreSQL
-   âœ… **å¥åº·ç›‘æ§**ï¼šå„æœåŠ¡å¥åº·æ£€æŸ¥ï¼ˆå«åç«¯ `/api/health/`ï¼‰
-   âœ… **HTTPS æ”¯æŒ**ï¼šå†…ç½® Letâ€™s Encryptï¼Œè‡ªåŠ¨ç»­æœŸ
-   âœ… **ç‰ˆæœ¬è¿½è¸ª**ï¼šåç«¯æ„å»ºæ—¶æ³¨å…¥ Git æäº¤ç‰ˆæœ¬ï¼ˆçŸ­ SHAï¼‰

```bash
# åœ¨å…·å¤‡ Docker çš„æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
docker compose -f docker-compose.prod.yml up -d
```

> è¯¦ç»†ç”Ÿäº§éƒ¨ç½²æ­¥éª¤è§ä¸‹æ–‡â€œç”Ÿäº§éƒ¨ç½²â€ã€‚

---

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### å‰ç½®æ¡ä»¶

-   Ubuntu 20.04+ æœåŠ¡å™¨
-   å·²å®‰è£… Docker ä¸ Docker Compose
-   åŸŸåå·²è§£æåˆ°æœåŠ¡å™¨å…¬ç½‘ IP
-   å¼€æ”¾ 80/443 ç«¯å£

### å¿«é€Ÿéƒ¨ç½²æµç¨‹

**1. å…‹éš†å¹¶é…ç½®ç¯å¢ƒ**

```bash
git clone git@github.com:yourname/myblog-py-django-ts-react.git
cd myblog-py-django-ts-react

# ç”Ÿäº§ç¯å¢ƒæ–‡ä»¶ç¤ºä¾‹ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰
cp .env.prod.django.example .env.prod.django
# ç¼–è¾‘ï¼šSECRET_KEYã€æ•°æ®åº“å¯†ç ç­‰
```

**2. é¦–æ¬¡ç­¾å‘ HTTPS è¯ä¹¦**

```bash
# æ¨èå…ˆä½¿ç”¨æš‚å­˜ç¯å¢ƒéªŒè¯
sudo ./deploy/certbot_setup.sh --domain=api.yourdomain.com --email=you@example.com --staging

# éªŒè¯é€šè¿‡åç”³è¯·æ­£å¼è¯ä¹¦
sudo ./deploy/certbot_setup.sh --domain=api.yourdomain.com --email=you@example.com
```

**3. ä½¿ç”¨ç®¡ç†è„šæœ¬éƒ¨ç½²**

```bash
# å…¨é‡éƒ¨ç½²ï¼ˆæ„å»ºé•œåƒå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼‰
./deploy/manage_prod.sh deploy-full

# æˆ–åˆ†æ­¥æ‰§è¡Œï¼š
./deploy/manage_prod.sh build      # æ„å»ºé•œåƒå¹¶æ³¨å…¥ç‰ˆæœ¬
./deploy/manage_prod.sh up         # å¯åŠ¨/æ›´æ–°å®¹å™¨
./deploy/manage_prod.sh status     # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
```

### å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æ—¥å¿—
./deploy/manage_prod.sh logs backend
./deploy/manage_prod.sh logs proxy

# é‡å¯æŸæœåŠ¡
./deploy/manage_prod.sh restart backend

# å¥åº·æ£€æŸ¥ä¸ç³»ç»Ÿè‡ªæ£€
./deploy/manage_prod.sh self-test

# è¯ä¹¦ç»­æœŸï¼ˆè‡ªåŠ¨ç»­æœŸï¼Œä»¥ä¸‹ä¸ºæ‰‹åŠ¨æµ‹è¯•ï¼‰
./deploy/manage_prod.sh renew-dry-run
./deploy/manage_prod.sh renew

# æŸ¥çœ‹å…¨éƒ¨å‘½ä»¤
./deploy/manage_prod.sh help
```

### ç”Ÿäº§æ¶æ„æ¦‚è§ˆ

```
Internet (HTTPS:443)
            â†“
    Nginx Proxy (container)
    - SSL termination
    - HSTS + security headers
    - Static file serving
            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“         â†“          â†“
Backend  Frontend   Static Files
(Gunicorn) (Nginx)   (Django collectstatic)
    â†“
PostgreSQL
(persistent volume)
```

### å…³é”®ç‰¹æ€§ï¼ˆç”Ÿäº§ï¼‰

-   ğŸ”’ **è‡ªåŠ¨ HTTPS**ï¼šLetâ€™s Encryptï¼Œ90 å¤©è‡ªåŠ¨ç»­æœŸ
-   ğŸ“Š **å¥åº·ç›‘æ§**ï¼š`/api/health/` è¿”å›æ•°æ®åº“çŠ¶æ€ä¸ç‰ˆæœ¬ä¿¡æ¯
-   ğŸ·ï¸ **ç‰ˆæœ¬è¿½è¸ª**ï¼šåç«¯é•œåƒå†…åŒ…å«å½“å‰ Git æäº¤çŸ­ SHA
-   ğŸ” **å®‰å…¨å¤´**ï¼šHSTSã€CSPã€X-Frame-Options ç­‰
-   ğŸ“¦ **å¹³æ»‘æ›´æ–°**ï¼šDocker Compose æ”¯æŒæ»šåŠ¨é‡å¯

> ğŸ’¡ æ‰€æœ‰éƒ¨ç½²è„šæœ¬ä½äº `deploy/` ç›®å½•ã€‚`manage_prod.sh` ç”¨äºè¿ç»´ç®¡ç†ï¼Œ`certbot_setup.sh` ç”¨äºè¯ä¹¦ç­¾å‘ä¸ç»­æœŸã€‚

---

## ğŸŒ å‰ç«¯éƒ¨ç½²åˆ° Vercelï¼ˆæ¨èï¼‰

å‰ç«¯å¯éƒ¨ç½²è‡³ **Vercel**ï¼Œäº«å—å…¨çƒ CDN ä¸é›¶è¿ç»´ï¼›åç«¯ç»§ç»­è¿è¡Œåœ¨ä½ çš„æœåŠ¡å™¨ä¸Šã€‚

-   **ç¯å¢ƒå˜é‡**

    -   å‰ç«¯é€šè¿‡ `VITE_API_BASE_URL` æŒ‡å‘åç«¯ API
    -   å¼€å‘ï¼š`http://localhost:8000`
    -   ç”Ÿäº§ï¼š`https://api.wangshixin.me`

-   **æ¶‰åŠæ–‡ä»¶**

    -   `myblog-frontend-react/src/config/api.ts`ï¼šé›†ä¸­ç®¡ç† API åŸºç¡€åœ°å€
    -   `.env.development` / `.env.production`ï¼šç¯å¢ƒå˜é‡æ¨¡æ¿
    -   `myblog-frontend-react/vercel.json`ï¼šSPA è·¯ç”±å›é€€é…ç½®ï¼ˆè§ä¸‹ï¼‰

-   **SPA æ·±é“¾æ¥ 404 çš„ä¿®å¤**
    -   ç°è±¡ï¼šç›´æ¥è®¿é—® `/post/<slug>` ç­‰å‰ç«¯è·¯ç”±åœ¨ Vercel è¿”å› 404
    -   è§£å†³ï¼šåœ¨ `vercel.json` ä¸­å°†æœªå‘½ä¸­é™æ€èµ„æºçš„è¯·æ±‚é‡å†™åˆ° `/index.html`
    -   è¡Œä¸ºï¼šä¼˜å…ˆèµ°æ–‡ä»¶ç³»ç»Ÿï¼ˆé™æ€èµ„æºï¼‰ï¼Œæœªå‘½ä¸­å†å›é€€åˆ° SPA

```json
{
    "routes": [
        { "handle": "filesystem" },
        { "src": "/(.*)", "dest": "/index.html" }
    ]
}
```

-   **åç«¯ CORS/CSRF**

    -   `CORS_ALLOWED_ORIGINS` éœ€åŒ…å«ä½ çš„å‰ç«¯åŸŸå
    -   `CSRF_TRUSTED_ORIGINS` éœ€åŒ…å« API ä¸å‰ç«¯çš„ HTTPS åŸŸå

-   **è‡ªå®šä¹‰åŸŸå**
    -   åœ¨ Vercel â†’ Domains ç»‘å®š `www.wangshixin.me`
    -   DNSï¼š`www` ä½¿ç”¨ CNAME æŒ‡å‘ `cname.vercel-dns.com`ï¼ˆæ¨èï¼‰ï¼Œæˆ– A è®°å½• `76.76.21.21`
    -   HTTPS ç”± Vercel è‡ªåŠ¨ç­¾å‘è¯ä¹¦

> è¯¦ç»†éƒ¨ç½²æ­¥éª¤è§ `myblog-frontend-react/VERCEL_DEPLOYMENT.md`ã€‚

---

## ğŸ› ï¸ ä¾èµ–ä¸æ¡†æ¶

### åç«¯

-   **[Django](https://www.djangoproject.com/)** â€“ Web æ¡†æ¶
-   **[Django REST Framework](https://www.django-rest-framework.org/)** â€“ API å·¥å…·åŒ…
-   **[django-filter](https://django-filter.readthedocs.io/)** â€“ é«˜çº§è¿‡æ»¤
-   **[gunicorn](https://gunicorn.org/)** â€“ ç”Ÿäº§ WSGI æœåŠ¡å™¨

### å‰ç«¯

-   **[React](https://react.dev/)** â€“ UI åº“
-   **[TypeScript](https://www.typescriptlang.org/)** â€“ ç±»å‹åŒ– JavaScript
-   **[Vite](https://vitejs.dev/)** â€“ æ–°ä¸€ä»£æ„å»ºå·¥å…·
-   **[Tailwind CSS](https://tailwindcss.com/)** â€“ åŸå­åŒ–æ ·å¼æ¡†æ¶
-   **[marked + DOMPurify](https://github.com/markedjs/marked)** â€“ å®‰å…¨ Markdown æ¸²æŸ“

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ç”¨äºä¸ªäººå­¦ä¹ ä¸å®è·µã€‚ä½ å¯ä»¥å°†å…¶ä½œä¸ºå‚è€ƒæˆ–æ¨¡æ¿ç”¨äºè‡ªå®šä¹‰åšå®¢ã€‚

---

## ğŸ™Œ ä½œè€…

-   **Shixin Wang (Jayden)** â€“ shixinw998@gmail.com

> ğŸ’Œ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åœ¨ GitHub ä¸Šç‚¹ä¸ª Star â­ï¼
